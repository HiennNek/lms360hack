<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>LMS360 Hack</title>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }
    
    body {
      font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
      background: linear-gradient(135deg, #F5F5DC 0%, #F0E68C 100%);
      min-height: 100vh;
      padding: 20px 10px;
      animation: fadeIn 0.8s ease-out;
      box-sizing: border-box;
    }
    
    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(20px); }
      to { opacity: 1; transform: translateY(0); }
    }
    
    .container {
      max-width: 90vw;
      width: 100%;
      margin: 0 auto;
      background: rgba(255, 255, 255, 0.95);
      border-radius: 20px;
      padding: 40px;
      box-shadow: 0 20px 60px rgba(0, 0, 0, 0.1);
      backdrop-filter: blur(10px);
      border: 1px solid rgba(255, 255, 255, 0.2);
      animation: slideUp 0.6s ease-out 0.2s both;
      box-sizing: border-box;
      position: relative;
      left: 0;
      right: 0;
    }
    
    @keyframes slideUp {
      from { opacity: 0; transform: translateY(40px); }
      to { opacity: 1; transform: translateY(0); }
    }
    
    h1 {
      margin-bottom: 10px;
      color: #8B4513;
      font-size: 2.5rem;
      font-weight: 700;
      text-align: center;
      background: linear-gradient(135deg, #8B4513, #CD853F);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
      text-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
      animation: titleGlow 5s ease-in-out infinite alternate;
    }
    
    h2 {
      margin-bottom: 30px;
      color: #e39157;
      font-size: 1.5rem;
      font-weight: 600;
      text-align: center;
      background: linear-gradient(135deg, #e39157, #ffc387);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
    }

    @keyframes titleGlow {
      from { filter: drop-shadow(0 0 5px rgba(139, 69, 19, 0.3)); }
      to { filter: drop-shadow(0 0 15px rgba(139, 69, 19, 0.6)); }
    }
    
    .input-group {
      margin-bottom: 25px;
      animation: slideInLeft 0.6s ease-out 0.4s both;
    }
    
    @keyframes slideInLeft {
      from { opacity: 0; transform: translateX(-30px); }
      to { opacity: 1; transform: translateX(0); }
    }
    
    .input-label {
      display: block;
      margin-bottom: 8px;
      font-weight: 600;
      color: #8B4513;
      font-size: 1.1rem;
    }
    
    input[type="text"] {
      width: 100%;
      max-width: 100%;
      padding: 15px 20px;
      font-size: 16px;
      border: 2px solid #E6D7C3;
      border-radius: 12px;
      background: rgba(255, 255, 255, 0.9);
      transition: all 0.3s ease;
      box-shadow: 0 4px 15px rgba(0, 0, 0, 0.05);
      box-sizing: border-box;
    }
    
    input[type="text"]:focus {
      outline: none;
      border-color: #D2B48C;
      box-shadow: 0 0 0 4px rgba(210, 180, 140, 0.2);
      transform: translateY(-2px);
    }
    
    input[type="text"]::placeholder {
      color: #A0A0A0;
      font-style: italic;
    }
    
    button {
      background: linear-gradient(135deg, #D2B48C, #BC9A6A);
      border: none;
      color: white;
      padding: 15px 30px;
      font-size: 16px;
      font-weight: 600;
      border-radius: 12px;
      cursor: pointer;
      position: relative;
      transition: all 0.3s ease;
      box-shadow: 0 6px 20px rgba(210, 180, 140, 0.4);
      overflow: hidden;
      animation: slideInRight 0.6s ease-out 0.6s both;
      width: 100%;
      max-width: 100%;
      box-sizing: border-box;
    }
    
    @keyframes slideInRight {
      from { opacity: 0; transform: translateX(30px); }
      to { opacity: 1; transform: translateX(0); }
    }
    
    button::before {
      content: '';
      position: absolute;
      top: 0;
      left: -100%;
      width: 100%;
      height: 100%;
      background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.3), transparent);
      transition: left 0.5s ease;
    }
    
    button:hover {
      transform: translateY(-3px);
      box-shadow: 0 10px 30px rgba(210, 180, 140, 0.6);
    }
    
    button:hover::before {
      left: 100%;
    }
    
    button:active {
      transform: translateY(-1px);
      box-shadow: 0 6px 20px rgba(210, 180, 140, 0.4);
    }
    
    button:disabled {
      background: #D3D3D3;
      cursor: not-allowed;
      transform: none;
      box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
    }
    
    button:disabled::before {
      display: none;
    }
    
    .loading {
      position: relative;
      color: transparent;
    }
    
    .loading::after {
      content: "";
      position: absolute;
      width: 20px;
      height: 20px;
      top: 45%;
      left: 50%;
      margin-left: -10px;
      margin-top: -10px;
      border: 3px solid rgba(255, 255, 255, 0.3);
      border-radius: 50%;
      border-top-color: #ffffff;
      animation: spin 1s linear infinite;
    }
    
    @keyframes spin {
      to { transform: rotate(360deg); }
    }
    
    #questions {
      margin-top: 30px;
      animation: fadeInUp 0.8s ease-out 0.8s both;
    }
    
    @keyframes fadeInUp {
      from { opacity: 0; transform: translateY(30px); }
      to { opacity: 1; transform: translateY(0); }
    }
    
    .question {
      margin-bottom: 20px;
      padding: 25px;
      background: linear-gradient(135deg, #FFFFFF, #FEFEFE);
      border-radius: 16px;
      box-shadow: 0 8px 25px rgba(0, 0, 0, 0.08);
      border: 1px solid rgba(210, 180, 140, 0.2);
      transition: all 0.3s ease;
      animation: questionSlide 0.6s ease-out both;
      animation-delay: calc(var(--index) * 0.1s);
      width: 100%;
      max-width: 100%;
      box-sizing: border-box;
      word-wrap: break-word;
      overflow-wrap: break-word;
    }
    
    @keyframes questionSlide {
      from { opacity: 0; transform: translateX(-20px); }
      to { opacity: 1; transform: translateX(0); }
    }
    
    .question:hover {
      transform: translateY(-5px);
      box-shadow: 0 15px 40px rgba(0, 0, 0, 0.12);
    }
    
    .question h3 {
      margin: 0 0 15px;
      font-size: 18px;
      font-weight: 600;
      color: #8B4513;
      position: relative;
      padding-left: 20px;
    }
    
    .question h3::before {
      content: '‚óè';
      position: absolute;
      left: 0;
      color: #D2B48C;
      font-size: 16px;
      animation: pulse 2s ease-in-out infinite;
    }
    
    @keyframes pulse {
      0%, 100% { opacity: 0.7; }
      50% { opacity: 1; }
    }
    
    .question p {
      color: #333;
      line-height: 1.6;
      margin: 0;
    }
    
    .highlight {
      background: linear-gradient(135deg, #F8E79F, #F4E4BC);
      font-weight: 600;
      padding: 2px 6px;
      border-radius: 6px;
      color: #8B4513;
      box-shadow: 0 2px 4px rgba(139, 69, 19, 0.2);
    }
    
    .error-message {
      background: linear-gradient(135deg, #FFE5E5, #FFCCCC);
      border: 2px solid #FFB3B3;
      border-radius: 12px;
      padding: 20px;
      color: #8B0000;
      text-align: center;
      font-weight: 500;
      animation: shake 0.5s ease-in-out;
      width: 100%;
      max-width: 100%;
      box-sizing: border-box;
      word-wrap: break-word;
      overflow-wrap: break-word;
    }
    
    @keyframes shake {
      0%, 100% { transform: translateX(0); }
      25% { transform: translateX(-5px); }
      75% { transform: translateX(5px); }
    }
    
    .success-message {
      background: linear-gradient(135deg, #E8F5E8, #D4F1D4);
      border: 2px solid #A8E6A8;
      border-radius: 12px;
      padding: 20px;
      color: #2E7D2E;
      text-align: center;
      font-weight: 500;
      animation: bounceIn 0.6s ease-out;
      width: 100%;
      max-width: 100%;
      box-sizing: border-box;
      word-wrap: break-word;
      overflow-wrap: break-word;
    }
    
    @keyframes bounceIn {
      0% { opacity: 0; transform: scale(0.3); }
      50% { opacity: 1; transform: scale(1.05); }
      70% { transform: scale(0.9); }
      100% { opacity: 1; transform: scale(1); }
    }
    
    /* Mobile First Responsive Design */
    @media (max-width: 1200px) {
      .container {
        max-width: 95vw;
        padding: 30px;
      }
    }
    
    @media (max-width: 768px) {
      body {
        padding: 20px 5px;
      }
      
      .container {
        padding: 20px;
        margin: 0 auto;
        border-radius: 15px;
        max-width: calc(100vw - 10px);
      }
      
      h1 {
        font-size: 1.8rem;
        margin-bottom: 20px;
      }
      
      .input-group {
        margin-bottom: 20px;
      }
      
      .input-label {
        font-size: 1rem;
      }
      
      input[type="text"] {
        padding: 12px 15px;
        font-size: 14px;
      }
      
      button {
        padding: 12px 20px;
        font-size: 14px;
      }
      
      .question {
        padding: 15px;
        margin-bottom: 15px;
      }
      
      .question h3 {
        font-size: 16px;
        margin-bottom: 10px;
      }
      
      .error-message,
      .success-message {
        padding: 15px;
        font-size: 14px;
      }
    }
    
    @media (max-width: 480px) {
      body {
        padding: 20px 2px;
      }
      
      .container {
        padding: 15px;
        margin: 0 auto;
        border-radius: 12px;
        max-width: calc(100vw - 4px);
      }
      
      h1 {
        font-size: 1.5rem;
        margin-bottom: 15px;
      }
      
      .input-group {
        margin-bottom: 15px;
      }
      
      input[type="text"] {
        padding: 10px 12px;
        font-size: 13px;
        border-radius: 8px;
      }
      
      button {
        padding: 10px 15px;
        font-size: 13px;
        border-radius: 8px;
      }
      
      .question {
        padding: 12px;
        margin-bottom: 12px;
        border-radius: 12px;
      }
      
      .question h3 {
        font-size: 14px;
        margin-bottom: 8px;
      }
      
      .question p {
        font-size: 13px;
      }
      
      .error-message,
      .success-message {
        padding: 12px;
        font-size: 13px;
        border-radius: 8px;
      }
      
      .highlight {
        padding: 1px 4px;
        font-size: 12px;
      }
    }
    
    @media (max-width: 320px) {
      h1 {
        font-size: 1.3rem;
      }
      
      .container {
        padding: 10px;
        margin: 0 auto;
        max-width: calc(100vw - 4px);
      }
      
      input[type="text"] {
        padding: 8px 10px;
        font-size: 12px;
      }
      
      button {
        padding: 8px 12px;
        font-size: 12px;
      }
      
      .question {
        padding: 10px;
      }
      
      .question h3 {
        font-size: 13px;
      }
      
      .question p {
        font-size: 12px;
      }
    }

    .sussy-img {
      display: block;
      margin-left: auto;
      margin-right: auto;
      margin-top: 100%;
      width: 45%;
      border-radius: 15px;
    }

  </style>
</head>
<body>
  <div class="container">
    <h1>LMS360 Hack</h1>
    <h2>v4.1</h2>

    <div class="input-group">
      <label class="input-label" for="link_lms360">üîó URL b√†i t·∫≠p LMS360:</label>
      <input type="text" id="link_lms360" placeholder="https://lms360.vn/..." />
    </div>
    
    <button id="hecker_button">
      <span>üöÄ Heck</span>
    </button>
    
    <div id="questions"></div>
    
    <footer style="margin-top: 40px; padding: 20px; text-align: center; border-top: 2px solid rgba(210, 180, 140, 0.3);">
      <p style="color: #8B4513; font-size: 14px; margin: 0;">
        <p>M√£ ngu·ªìn v√† c√°ch ho·∫°t ƒë·ªông: </p>
        <a href="https://github.com/HiennNek/lms360hack" target="_blank" style="color: #D2B48C; text-decoration: none; font-weight: 600; transition: color 0.3s ease;" onmouseover="this.style.color='#8B4513'" onmouseout="this.style.color='#D2B48C'">
          GitHub
        </a>
        <br><br>B·∫±ng c√°ch s·ª≠ d·ª•ng lms360hack.pages.dev v√† c√°c d·ªãch v·ª• li√™n quan ƒë·∫øn lms360hack/LMS360 Hack ho·∫∑c/v√† c√≥ ngu·ªìn g·ªëc t·ª´ lms360hack/LMS360 Hack, b·∫°n ƒë√£ ƒë·ªìng √Ω tu√¢n th·ªß <a href="https://raw.githubusercontent.com/HiennNek/lms360hack/refs/heads/main/LICENSE.md">c√°c ch√≠nh s√°ch s·ª≠ d·ª•ng, c√°c ƒëi·ªÅu kho·∫£n ph√¢n ph·ªëi v√† c√°c tuy√™n b·ªë t·ª´ ch·ªëi tr√°ch nhi·ªám</a> c·ªßa t√¥i.</p> 
    </footer>
  </div>

  <br>
  <img class="sussy-img" src="fuckulms360.png">

  <script>
    // const h5p_content_json = document.getElementById("h5p_content_json");
    const link_lms360 = document.getElementById("link_lms360");
    const hecker_button = document.getElementById("hecker_button");
    const container = document.getElementById("questions");

    // Fuck you our browser and our LMS, too
    // Script c·ªßa t√¥i b·ªã ch·∫∑n CORS :(
    // No ∆∞orry, ƒë√£ t√¨m ƒëc c√°ch bypass
    const bypass_that_fucking_CORS = "https://bypass-lms360-cors.trdahien2011.workers.dev/?url=";

    ////////////////////////////////////////////////////////////////////////////////
    // Thu·∫≠t to√°n chuy·ªÉn ƒë·ªïi JSON sang ng√¥n ng·ªØ m√† lo√†i ng∆∞·ªùi c√≥ th·ªÉ hi·ªÉu ƒë∆∞·ª£c :) //
    ////////////////////////////////////////////////////////////////////////////////

    function real_not_fake(results) {
      if (!results || results.length === 0) return false;
      
      return results.some(result => {
        const text = result.text || "";
        return text.trim() !== "" && 
               !text.includes("C√¢u h·ªèi tr·ªëng") && 
               !text.includes("kh√¥ng c√≥ n·ªôi dung") &&
               !text.includes("kh√¥ng c√≥ ƒë√°p √°n");
      });
    }

    // Lo·∫°i c√¢u h·ªèi #1: Vi·∫øt v√†o ch·ªó tr·ªëng
    function question_type_1(jsonContent) {
      const lib = (jsonContent.library || jsonContent.__containerLibrary || "").toString();
      let results = [];

      const interactions = jsonContent.interactiveVideo?.assets?.interactions || [];
      interactions.forEach(interaction => {
        if ((interaction.action?.library || "").startsWith("H5P.Blanks")) {
          const questions = interaction.action.params?.questions || [];
          questions.forEach(q => {
            const clean = q.replace(/<\/?p>/g, "")
                          .replace(/\*(.*?)\*/g, '<span class="highlight">$1</span>');
            results.push({ index: results.length + 1, text: clean });
          });
        }
      });

      if (lib.startsWith("H5P.Blanks") && Array.isArray(jsonContent.questions)) {
        jsonContent.questions.forEach(q => {
          const clean = q.replace(/<\/?p>/g, "")
                        .replace(/\*(.*?)\*/g, '<span class="highlight">$1</span>');
          results.push({ index: results.length + 1, text: clean });
        });
      }

      return real_not_fake(results) ? results : null;
    }

    // Lo·∫°i c√¢u h·ªèi #2: Tr·∫Øc nghi·ªám c√≥ n√∫t submit
    function question_type_2(jsonContent) {
      const mcqList = jsonContent.questions || [];
      let results = [];

      mcqList.forEach((q, idx) => {
        if (q.library && q.library.startsWith("H5P.MultiChoice")) {
          const questionText = q.params?.question || `C√¢u h·ªèi ${idx + 1}`;
          const answers = q.params?.answers || [];

          let hasCorrect = false;
          const optionsHtml = answers.map((ans, i) => {
            if (ans.correct) hasCorrect = true;
            const correctClass = ans.correct ? "highlight" : "";
            return `<li class="${correctClass}">${ans.text}</li>`;
          }).join("");

          const finalHtml = hasCorrect 
            ? `${questionText}<ul>${optionsHtml}</ul>` 
            : `${questionText}<ul>${optionsHtml}</ul>`;

          results.push({
            index: idx + 1,
            text: finalHtml
          });
        }
      });

      return real_not_fake(results) ? results : null;
    }

    // Lo·∫°i c√¢u h·ªèi #3: Tr·∫Øc nghi·ªám kh√¥ng c√≥ n√∫t submit (InteractiveVideo)
    function question_type_3(jsonContent) {
      const interactions = jsonContent.interactiveVideo?.assets?.interactions || [];
      let results = [];

      interactions.forEach(interaction => {
        if (interaction.action?.library?.startsWith("H5P.SingleChoiceSet")) {
          const choices = interaction.action.params?.choices || [];

          choices.forEach((choice, idx) => {
            const questionText = choice.question?.replace(/<\/?p>/g, "").trim();
            const answers = choice.answers || [];

            if (!questionText || answers.length === 0) {
              return;
            }

            const optionsHtml = answers.map((a, i) => {
              const cleanText = a.replace(/<\/?p>/g, "").trim();
              const correctClass = i === 0 ? "highlight" : "";
              return `<li class="${correctClass}">${cleanText}</li>`;
            }).join("");

            results.push({
              index: idx + 1,
              text: `${questionText}<ul>${optionsHtml}</ul>`
            });
          });
        }
      });

      return real_not_fake(results) ? results : null;
    }

    // Lo·∫°i c√¢u h·ªèi #4: C√¢u h·ªèi tr·∫Øc nghi·ªám trong InteractiveVideo
    function question_type_4(jsonContent) {
      const interactions = jsonContent.interactiveVideo?.assets?.interactions || [];
      let results = [];

      interactions.forEach(interaction => {
        if (interaction.action?.library?.startsWith("H5P.MultiChoice")) {
          const params = interaction.action.params || {};
          const questionText = params.question?.replace(/<\/?p>/g, "") || "C√¢u h·ªèi tr·∫Øc nghi·ªám";
          const answers = params.answers || [];

          let hasCorrect = false;
          const optionsHtml = answers.map((ans, i) => {
            const cleanText = ans.text.replace(/<\/?p>/g, "");
            if (ans.correct) hasCorrect = true;
            const correctClass = ans.correct ? "highlight" : "";
            return `<li class="${correctClass}">${cleanText}</li>`;
          }).join("");

          const finalHtml = hasCorrect 
            ? `${questionText}<ul>${optionsHtml}</ul>` 
            : `${questionText}<ul>${optionsHtml}</ul>`;

          results.push({
            index: results.length + 1,
            text: finalHtml
          });
        }
      });

      return real_not_fake(results) ? results : null;
    }

    // Lo·∫°i c√¢u h·ªèi #5: K√©o th·∫£ vƒÉn b·∫£n
    function question_type_5(jsonContent) {
      if (jsonContent.library?.startsWith("H5P.DragText") || jsonContent.textField) {
        const lines = (jsonContent.textField || "").split("\\n");
        let text = lines.map(line => {
          let clean = line.replace(/‚Äæ\t/g, "").trim();
          return clean.replace(/\*(.*?)\*/g, '<span class="highlight">$1</span>');
        }).join("<br>");

        if (jsonContent.distractors) {
          const distractors = jsonContent.distractors
            .match(/\*(.*?)\*/g)
            ?.map(d => d.replace(/\*/g, ""))
            .join(", ");
          if (distractors) {
            text += `<br><br><strong>T·ª´ kh√¥ng c√≥ trong ƒë√°p √°n:</strong> ${distractors}`;
          }
        }

        return real_not_fake([{ index: 1, text }]) ? [{ index: 1, text }] : null;
      }
      return null;
    }

    // Lo·∫°i c√¢u h·ªèi #6: ƒê√∫ng/Sai trong InteractiveVideo
    function question_type_6(jsonContent) {
      const interactions = jsonContent.interactiveVideo?.assets?.interactions || [];
      let results = [];

      interactions.forEach(interaction => {
        if (interaction.action?.library?.startsWith("H5P.TrueFalse")) {
          const params = interaction.action.params || {};
          const questionText = params.question?.replace(/<\/?p>/g, "") || "C√¢u h·ªèi ƒê√∫ng/Sai";

          const trueLabel = params.l10n?.trueText || "ƒê√∫ng";
          const falseLabel = params.l10n?.falseText || "Sai";

          const correctAnswer = params.correct === "true" ? trueLabel : falseLabel;

          const optionsHtml = `
            <ul>
              <li class="${params.correct === "true" ? "highlight" : ""}">${trueLabel}</li>
              <li class="${params.correct === "false" ? "highlight" : ""}">${falseLabel}</li>
            </ul>
          `;

          results.push({
            index: results.length + 1,
            text: `${questionText}${optionsHtml}<p><em>ƒê√°p √°n ƒë√∫ng: ${correctAnswer}</em></p>`
          });
        }
      });

      return real_not_fake(results) ? results : null;
    }

    // Lo·∫°i c√¢u h·ªèi #7: K√©o th·∫£ vƒÉn b·∫£n trong InteractiveVideo
    function question_type_7(jsonContent) {
      const interactions = jsonContent.interactiveVideo?.assets?.interactions || [];
      let results = [];

      interactions.forEach(interaction => {
        if (interaction.action?.library?.startsWith("H5P.DragText")) {
          const params = interaction.action.params || {};
          const lines = (params.textField || "").split("\\n");

          let text = lines.map(line => {
            let clean = line.replace(/‚Äæ\t/g, "").trim();
            return clean.replace(/\*(.*?)\*/g, '<span class="highlight">$1</span>');
          }).join("<br>");

          if (params.distractors) {
            const distractors = params.distractors
              .match(/\*(.*?)\*/g)
              ?.map(d => d.replace(/\*/g, ""))
              .join(", ");
            if (distractors) {
              text += `<br><strong>T·ª´ kh√¥ng c√≥ trong ƒë√°p √°n:</strong> ${distractors}`;
            }
          }

          results.push({
            index: results.length + 1,
            text
          });
        }
      });

      return real_not_fake(results) ? results : null;
    }

    // Lo·∫°i c√¢u h·ªèi #8: C√¢u h·ªèi t·ª± lu·∫≠n kh√¥ng c√≥ ƒë√°p √°n s·∫µn
    function question_type_8(jsonContent) {
      const interactions = jsonContent.interactiveVideo?.assets?.interactions || [];
      let results = [];

      interactions.forEach(interaction => {
        if (interaction.action?.library?.startsWith("H5P.FreeTextQuestion")) {
          const params = interaction.action.params || {};
          const questionText = params.question?.replace(/<\/?p>/g, "") || "C√¢u h·ªèi t·ª± lu·∫≠n";
          const placeholder = params.placeholder || "";

          let text = `${questionText}<br><em>(ƒê√¢y l√† d·∫°ng c√¢u h·ªèi t·ª± lu·∫≠n kh√¥ng c√≥ ƒë√°p √°n s·∫µn)</em>`;
          if (placeholder) {
            text += `<br><small>G·ª£i √Ω: ${placeholder}</small>`;
          }

          results.push({
            index: results.length + 1,
            text
          });
        }
      });

      return real_not_fake(results) ? results : null;
    }

    // Lo·∫°i c√¢u h·ªèi #9: Tr·∫Øc nghi·ªám kh√¥ng c√≥ n√∫t submit
    function question_type_9(jsonContent) {
      const choices = jsonContent.choices || [];
      let results = [];

      choices.forEach((choice, idx) => {
        const questionText = choice.question?.replace(/<\/?p>/g, "").trim();
        const answers = choice.answers || [];

        if (!questionText || answers.length === 0) {
          return;
        }

        const optionsHtml = answers.map((a, i) => {
          const cleanText = a.replace(/<\/?p>/g, "").trim();
          const correctClass = i === 0 ? "highlight" : "";
          return `<li class="${correctClass}">${cleanText}</li>`;
        }).join("");

        results.push({
          index: idx + 1,
          text: `${questionText}<ul>${optionsHtml}</ul>`
        });
      });

      return real_not_fake(results) ? results : null;
    }
    //#10: S·∫Øp x·∫øp c√¢u
    function question_type_10(jsonContent) {
      const lib = (jsonContent.library || jsonContent.__containerLibrary || "").toString();
    
      if (lib.startsWith("H5P.SortParagraphs") && Array.isArray(jsonContent.paragraphs)) {
        const taskDesc = jsonContent.taskDescription?.replace(/<\/?p>/g, "") || "S·∫Øp x·∫øp c√°c ƒëo·∫°n sau:";
        const itemsHtml = jsonContent.paragraphs
          .map((p, i) => `<li>${p.replace(/<\/?p>/g, "").trim()}</li>`)
          .join("");
    
        return real_not_fake([{
          index: 1,
          text: `<strong>${taskDesc}</strong><ul>${itemsHtml}</ul><p><em>(S·∫Øp x·∫øp theo ƒë√∫ng th·ª© t·ª±)</em></p>`
        }]) ? [{
          index: 1,
          text: `<strong>${taskDesc}</strong><ul>${itemsHtml}</ul><p><em>(S·∫Øp x·∫øp theo ƒë√∫ng th·ª© t·ª±)</em></p>`
        }] : null;
      }
    
      return null;
    }

    //#11: Some fucking random multiple choice question
    function question_type_11(jsonContent) {
        const lib = (jsonContent.library || jsonContent.__containerLibrary || "").toString();
        if (lib.startsWith("H5P.Summary") && jsonContent.intro) {
          const intro = jsonContent.intro.replace(/<\/?p>/g, "");
          const groups = jsonContent.summaries || [];
      
          const hasValidGroups = groups.some(g => {
            const summaryItems = g.summary || [];
            return summaryItems.some(item => {
              const clean = item.replace(/<\/?p>/g, "").trim();
              return clean.length > 0;
            });
          });
          
          if (!hasValidGroups) return null;
      
          const groupHtml = groups.map((g) => {
            const items = (g.summary || [])
              .map((i, idx) => {
                const clean = i.replace(/<\/?p>/g, "").trim();
                const correctClass = idx === 0 ? "highlight" : "";
                return `<li class="${correctClass}">${clean}</li>`;
              })
              .join("");
            return `<ul>${items}</ul>`;
          }).join("");
      
          return real_not_fake([{
            index: 1,
            text: `<strong>${intro}</strong><br>${groupHtml}<p><em></em></p>`
          }]) ? [{
            index: 1,
            text: `<strong>${intro}</strong><br>${groupHtml}<p><em></em></p>`
          }] : null;
        }
      
        const summary = jsonContent.interactiveVideo?.summary?.task;
        if (summary && summary.library?.startsWith("H5P.Summary")) {
          const intro = summary.params?.intro?.replace(/<\/?p>/g, "") || "Ch·ªçn c√¢u ƒë√∫ng:";
          const groups = summary.params?.summaries || [];
      
          const hasValidGroups = groups.some(g => {
            const summaryItems = g.summary || [];
            return summaryItems.some(item => {
              const clean = item.replace(/<\/?p>/g, "").trim();
              return clean.length > 0;
            });
          });
          
          if (!hasValidGroups) return null;
      
          const groupHtml = groups.map((g) => {
            const items = (g.summary || [])
              .map((i, idx) => {
                const clean = i.replace(/<\/?p>/g, "").trim();
                const correctClass = idx === 0 ? "highlight" : "";
                return `<li class="${correctClass}">${clean}</li>`;
              })
              .join("");
            return `<ul>${items}</ul>`;
          }).join("");
      
          return real_not_fake([{
            index: 1,
            text: `<strong>${intro}</strong><br>${groupHtml}<p><em></em></p>`
          }]) ? [{
            index: 1,
            text: `<strong>${intro}</strong><br>${groupHtml}<p><em></em></p>`
          }] : null;
        }
      
        return null;
    }

    const question_type = [
      question_type_1,
      question_type_2,
      question_type_3,
      question_type_4,
      question_type_5,
      question_type_6,
      question_type_7,
      question_type_8,
      question_type_9,
      question_type_10,
      question_type_11
    ];

    ///////////////////////////////////////////////////////////////////////////////////////////////////////////////

    function render_quest(data) {
      try {
        let jsonContent;
        let outerLib = "";

        if (data.integration && data.integration.contents) {
          const contentId = Object.keys(data.integration.contents)[0];
          const contentObj = data.integration.contents[contentId];
          jsonContent = JSON.parse(contentObj.jsonContent);

          outerLib = contentObj.library || contentObj.metadata?.contentType || "";
          jsonContent.__containerLibrary = outerLib;
        } else {
          jsonContent = data;
          outerLib = jsonContent.library || "";
          jsonContent.__containerLibrary = outerLib;
        }

        let results = [];
        for (let handler of question_type) {
          const output = handler(jsonContent);
          if (output) results = results.concat(output);
        }

        container.innerHTML = "";

        if (results.length > 0) {
          container.innerHTML = `<div class="success-message">üéâ T√¨m th·∫•y ${results.length} c√¢u h·ªèi!</div><br>`;
          results.forEach((q, index) => {
            setTimeout(() => {
              const div = document.createElement("div");
              div.className = "question";
              div.style.setProperty('--index', index);
              div.innerHTML = `<h3>C√¢u h·ªèi ${q.index}:</h3><p>${q.text}</p>`;
              container.appendChild(div);
            }, index * 100);
          });
        } else {
          container.innerHTML = "<div class='error-message'>‚ùå Ki·ªÉu n·ªôi dung n√†y ch∆∞a ƒë∆∞·ª£c h·ªó tr·ª£.</div>";
        }
      } catch (err) {
        console.error("L·ªói khi ph√¢n t√≠ch n·ªôi dung:", err);
        container.innerHTML = "<div class='error-message'>‚ùå Link kh√¥ng h·ª£p l·ªá ho·∫∑c kh√¥ng ƒë√∫ng ƒë·ªãnh d·∫°ng.</div>";
      }
    }

    /*
    h5p_content_json.addEventListener("change", (event) => {
      const file = event.target.files[0];
      if (!file) return;

      const reader = new FileReader();
      reader.onload = (e) => {
        try {
          const data = JSON.parse(e.target.result);
          render_quest(data);
        } catch (err) {
          container.innerHTML = "<p style='color:red;'>Kh√¥ng th·ªÉ ƒë·ªçc c√¢u h·ªèi.</p>";
        }
      };
      reader.readAsText(file, "UTF-8");
    });
    */

    function hack_da_answer() {
      const inputUrl = link_lms360.value.trim();
      if (!inputUrl) {
        alert("T√¥i kh√¥ng th·∫•y g√¨ trong URL!.");
        return;
      }

      hecker_button.disabled = true;
      hecker_button.classList.add("loading");
      hecker_button.innerHTML = "<span>‚è≥ Loading...</span>";

      try {
        const parsed = new URL(inputUrl);
        const questionId = parsed.searchParams.get("c");

        if (!questionId) {
          alert("ƒê√¢y kh√¥ng ph·∫£i URL b√†i t·∫≠p!");
          hecker_button.disabled = false;
          hecker_button.classList.remove("loading");
          hecker_button.innerHTML = "<span>üöÄ Heck</span>";
          return;
        }

        const ur_homework_link_that_ur_lazy_to_do = `https://lms360.vn/h5p/${questionId}/play`;
        const fuck_you_cors = bypass_that_fucking_CORS + encodeURIComponent(ur_homework_link_that_ur_lazy_to_do);

        fetch(fuck_you_cors)
          .then(res => {
            if (!res.ok) throw new Error("Kh√¥ng th·ªÉ load h·ªá th·ªëng bypass CORS.");
            return res.json();
          })
          .then(data => {
            render_quest(data);
            hecker_button.disabled = false;
            hecker_button.classList.remove("loading");
            hecker_button.innerHTML = "<span>üöÄ Heck</span>";
          })
          .catch(err => {
            console.error(err);
            container.innerHTML = "<div class='error-message'>‚ùå Kh√¥ng th·ªÉ t·∫£i ho·∫∑c ph√¢n t√≠ch JSON / h·ªá th·ªëng bypass CORS.</div>";
            hecker_button.disabled = false;
            hecker_button.classList.remove("loading");
            hecker_button.innerHTML = "<span>üöÄ Heck</span>";
          });
      } catch (err) {
        alert("C√°i link g√¨ ƒë√¢y? (URL kh√¥ng h·ª£p l·ªá - c√≥ th·ªÉ do thi·∫øu https:// ho·∫∑c http://)");
        hecker_button.disabled = false;
        hecker_button.classList.remove("loading");
        hecker_button.innerHTML = "<span>üöÄ Heck</span>";
      }
    }

    hecker_button.addEventListener("click", hack_da_answer);

    link_lms360.addEventListener("keypress", (event) => {
      if (event.key === "Enter") {
        event.preventDefault();
        hack_da_answer();
      }
    });
  </script>
</body>
</html>
